@page "/game/tutorial"
@page "/game/help"
@using MudBlazor
@inject NavigationManager Navigation

<PageTitle>Tutorial - Galactic Strategy</PageTitle>

<div class="tutorial-wrapper">
    <header class="lcars-header">
        <a href="/game/overview" class="back-link">‚Üê BACK</a>
        <h1 class="page-title">üìö COMMANDER'S GUIDE</h1>
    </header>

    <div class="tutorial-content">
        <MudTabs Elevation="2" Rounded="true" ApplyEffectsToContainer="true" Class="tutorial-tabs">
            
            @* Getting Started *@
            <MudTabPanel Text="üöÄ Getting Started" Icon="@Icons.Material.Filled.PlayArrow">
                <div class="section">
                    <h2>Welcome, Commander!</h2>
                    <p>Galactic Strategy is a 4X space strategy game set in the Star Trek universe. Your mission is to lead your faction to galactic dominance through exploration, expansion, exploitation, and extermination.</p>
                    
                    <div class="info-cards">
                        <div class="info-card">
                            <div class="card-icon">üî≠</div>
                            <h3>Explore</h3>
                            <p>Send scouts to discover new star systems and uncover the mysteries of the galaxy.</p>
                        </div>
                        <div class="info-card">
                            <div class="card-icon">üåç</div>
                            <h3>Expand</h3>
                            <p>Colonize habitable planets to grow your empire and increase your resources.</p>
                        </div>
                        <div class="info-card">
                            <div class="card-icon">‚öô</div>
                            <h3>Exploit</h3>
                            <p>Build infrastructure and research technology to strengthen your civilization.</p>
                        </div>
                        <div class="info-card">
                            <div class="card-icon">‚öî</div>
                            <h3>Exterminate</h3>
                            <p>Build powerful fleets to defend your territory and conquer your enemies.</p>
                        </div>
                    </div>

                    <h3>Quick Start Guide</h3>
                    <ol class="steps-list">
                        <li><strong>Check your Overview</strong> - See your faction status, resources, and victory progress</li>
                        <li><strong>Explore the Galaxy Map</strong> - Click systems to see details and plan expansion</li>
                        <li><strong>Manage your Colonies</strong> - Build ships and structures to grow stronger</li>
                        <li><strong>Command your Fleets</strong> - Move ships to explore or attack enemy systems</li>
                        <li><strong>End your Turn</strong> - Process the turn to see results and continue</li>
                    </ol>
                </div>
            </MudTabPanel>

            @* Galaxy Map *@
            <MudTabPanel Text="üó∫Ô∏è Galaxy Map" Icon="@Icons.Material.Filled.Map">
                <div class="section">
                    <h2>Galaxy Map Navigation</h2>
                    
                    <div class="feature-block">
                        <h3>üñ±Ô∏è Controls</h3>
                        <ul>
                            <li><strong>Click & Drag</strong> - Pan around the galaxy</li>
                            <li><strong>Scroll Wheel</strong> - Zoom in/out</li>
                            <li><strong>Click System</strong> - Select and view details</li>
                            <li><strong>Double-Click</strong> - Open system view</li>
                        </ul>
                    </div>

                    <div class="feature-block">
                        <h3>‚≠ê Star Types</h3>
                        <div class="star-legend">
                            <div class="legend-item"><span class="star yellow"></span> Yellow - Common, good habitability</div>
                            <div class="legend-item"><span class="star red"></span> Red - Dwarf stars, fewer planets</div>
                            <div class="legend-item"><span class="star blue"></span> Blue - Hot, resource-rich</div>
                            <div class="legend-item"><span class="star white"></span> White - Rare, high value</div>
                        </div>
                    </div>

                    <div class="feature-block">
                        <h3>üè¥ Territory Colors</h3>
                        <p>Systems are color-coded by controlling faction. Your territory appears highlighted, while enemy and neutral systems show their respective colors.</p>
                    </div>

                    <div class="feature-block">
                        <h3>üöÄ Fleet Icons</h3>
                        <ul>
                            <li><strong>Triangle (stationary)</strong> - Fleet at rest in system</li>
                            <li><strong>Triangle (moving)</strong> - Fleet in transit with engine trail</li>
                            <li><strong>Number</strong> - Ship count in fleet</li>
                        </ul>
                    </div>
                </div>
            </MudTabPanel>

            @* Fleets & Combat *@
            <MudTabPanel Text="‚öîÔ∏è Fleets & Combat" Icon="@Icons.Material.Filled.RocketLaunch">
                <div class="section">
                    <h2>Fleet Management</h2>
                    
                    <div class="feature-block">
                        <h3>üöÄ Ship Classes</h3>
                        <table class="data-table">
                            <thead>
                                <tr><th>Class</th><th>Role</th><th>Strength</th><th>Cost</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Scout</td><td>Exploration</td><td>Low</td><td>50‚öô</td></tr>
                                <tr><td>Escort</td><td>Light Combat</td><td>Medium</td><td>80‚öô</td></tr>
                                <tr><td>Destroyer</td><td>Balanced</td><td>Medium</td><td>120‚öô</td></tr>
                                <tr><td>Cruiser</td><td>Heavy Combat</td><td>High</td><td>180‚öô</td></tr>
                                <tr><td>Battleship</td><td>Capital Ship</td><td>Very High</td><td>300‚öô</td></tr>
                                <tr><td>Transport</td><td>Cargo</td><td>Low</td><td>60‚öô</td></tr>
                                <tr><td>Colony Ship</td><td>Colonization</td><td>None</td><td>150‚öô</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="feature-block">
                        <h3>‚öîÔ∏è The Thermopylae Principle</h3>
                        <p class="highlight-text">Combat in Galactic Strategy rewards tactical excellence over raw numbers. A smaller, well-positioned fleet with high morale and experienced crews can defeat a larger enemy force.</p>
                        <ul>
                            <li><strong>Morale</strong> - Affects combat effectiveness and retreat threshold</li>
                            <li><strong>Experience</strong> - Veteran ships deal more damage and take less</li>
                            <li><strong>Position</strong> - Defensive bonuses for system defenders</li>
                            <li><strong>Stance</strong> - Aggressive, Balanced, or Defensive postures</li>
                        </ul>
                    </div>

                    <div class="feature-block">
                        <h3>üéØ Combat Resolution</h3>
                        <ol>
                            <li>Fleets meeting in same system trigger combat</li>
                            <li>Combat proceeds in rounds until one side retreats or is destroyed</li>
                            <li>Ships fire based on weapon power, modified by experience</li>
                            <li>Shields absorb damage first, then hull takes hits</li>
                            <li>Critical hits can disable systems or cause extra damage</li>
                        </ol>
                    </div>
                </div>
            </MudTabPanel>

            @* Colonies *@
            <MudTabPanel Text="üåç Colonies" Icon="@Icons.Material.Filled.LocationCity">
                <div class="section">
                    <h2>Colony Management</h2>
                    
                    <div class="feature-block">
                        <h3>üìä Colony Stats</h3>
                        <ul>
                            <li><strong>Population</strong> - Grows each turn, affects production</li>
                            <li><strong>Production (‚öô)</strong> - Build speed for ships and structures</li>
                            <li><strong>Research (üî¨)</strong> - Contributes to technology progress</li>
                            <li><strong>Defense (üõ°)</strong> - Orbital defense strength</li>
                        </ul>
                    </div>

                    <div class="feature-block">
                        <h3>üèóÔ∏è Buildings</h3>
                        <table class="data-table">
                            <thead>
                                <tr><th>Building</th><th>Effect</th><th>Cost</th></tr>
                            </thead>
                            <tbody>
                                <tr><td>Shipyard</td><td>+50% ship production</td><td>200‚öô</td></tr>
                                <tr><td>Research Lab</td><td>+25 research output</td><td>150‚öô</td></tr>
                                <tr><td>Orbital Defense</td><td>+50 defense rating</td><td>180‚öô</td></tr>
                                <tr><td>Mining Complex</td><td>+30% production</td><td>160‚öô</td></tr>
                                <tr><td>Hydroponics</td><td>+20% pop growth</td><td>120‚öô</td></tr>
                                <tr><td>Shield Generator</td><td>+25 planetary shields</td><td>220‚öô</td></tr>
                            </tbody>
                        </table>
                    </div>

                    <div class="feature-block">
                        <h3>üåç Colonization</h3>
                        <ol>
                            <li>Build a Colony Ship at any colony</li>
                            <li>Move the fleet to an unclaimed system with habitable planets</li>
                            <li>Select "Colonize" on an eligible planet</li>
                            <li>The Colony Ship is consumed to establish the new colony</li>
                        </ol>
                    </div>
                </div>
            </MudTabPanel>

            @* Victory Conditions *@
            <MudTabPanel Text="üèÜ Victory" Icon="@Icons.Material.Filled.EmojiEvents">
                <div class="section">
                    <h2>Victory Conditions</h2>
                    <p>There are three ways to achieve victory in Galactic Strategy:</p>
                    
                    <div class="victory-cards">
                        <div class="victory-card conquest">
                            <div class="victory-icon">‚öîÔ∏è</div>
                            <h3>Conquest Victory</h3>
                            <p>Control 75% of all colonized systems in the galaxy. Achieved through military dominance and territorial expansion.</p>
                            <div class="victory-tip">Tip: Focus on building a strong fleet and targeting enemy homeworlds.</div>
                        </div>
                        
                        <div class="victory-card economic">
                            <div class="victory-icon">üí∞</div>
                            <h3>Economic Victory</h3>
                            <p>Accumulate 10,000 credits in your treasury. Build a thriving economy through trade and efficient colony management.</p>
                            <div class="victory-tip">Tip: Build Mining Complexes and focus on high-production colonies.</div>
                        </div>
                        
                        <div class="victory-card time">
                            <div class="victory-icon">‚è±Ô∏è</div>
                            <h3>Time Victory</h3>
                            <p>Have the highest score when Turn 100 is reached. Score is based on systems controlled, fleet strength, and technology.</p>
                            <div class="victory-tip">Tip: Balance expansion, economy, and military for the best overall score.</div>
                        </div>
                    </div>
                </div>
            </MudTabPanel>

            @* Keyboard Shortcuts *@
            <MudTabPanel Text="‚å®Ô∏è Shortcuts" Icon="@Icons.Material.Filled.Keyboard">
                <div class="section">
                    <h2>Keyboard Shortcuts</h2>
                    
                    <div class="shortcuts-grid">
                        <div class="shortcut-group">
                            <h3>Navigation</h3>
                            <div class="shortcut"><kbd>M</kbd> Galaxy Map</div>
                            <div class="shortcut"><kbd>F</kbd> Fleets</div>
                            <div class="shortcut"><kbd>C</kbd> Colonies</div>
                            <div class="shortcut"><kbd>R</kbd> Research</div>
                            <div class="shortcut"><kbd>D</kbd> Diplomacy</div>
                            <div class="shortcut"><kbd>O</kbd> Overview</div>
                            <div class="shortcut"><kbd>S</kbd> Settings</div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Map Controls</h3>
                            <div class="shortcut"><kbd>+</kbd> Zoom In</div>
                            <div class="shortcut"><kbd>-</kbd> Zoom Out</div>
                            <div class="shortcut"><kbd>Space</kbd> Center Map</div>
                            <div class="shortcut"><kbd>Esc</kbd> Back / Close</div>
                        </div>
                        
                        <div class="shortcut-group">
                            <h3>Game</h3>
                            <div class="shortcut"><kbd>Enter</kbd> End Turn</div>
                            <div class="shortcut"><kbd>?</kbd> Help</div>
                        </div>
                    </div>
                </div>
            </MudTabPanel>
            
        </MudTabs>
    </div>
</div>

<style>
    .tutorial-wrapper { min-height: 100vh; background: linear-gradient(135deg, #000010 0%, #0a0a20 100%); }
    
    .lcars-header { height: 60px; background: linear-gradient(180deg, #1a1a2e 0%, #0a0a18 100%); border-bottom: 3px solid #ff9900; display: flex; align-items: center; padding: 0 24px; gap: 24px; }
    .back-link { color: #ff9900; text-decoration: none; font-weight: 600; padding: 8px 16px; border: 1px solid #ff9900; border-radius: 6px; }
    .back-link:hover { background: #ff9900; color: #000; }
    .page-title { color: #ffcc00; font-size: 20px; font-weight: 700; letter-spacing: 4px; margin: 0; }

    .tutorial-content { max-width: 1000px; margin: 0 auto; padding: 24px; }
    
    .section { padding: 24px; color: #ccc; line-height: 1.7; }
    .section h2 { color: #ffcc00; font-size: 28px; margin-bottom: 16px; border-bottom: 2px solid #ff9900; padding-bottom: 8px; }
    .section h3 { color: #99ccff; font-size: 18px; margin: 24px 0 12px 0; }
    .section p { margin-bottom: 16px; }
    .section ul, .section ol { margin-left: 24px; margin-bottom: 16px; }
    .section li { margin-bottom: 8px; }
    
    .info-cards { display: grid; grid-template-columns: repeat(4, 1fr); gap: 16px; margin: 24px 0; }
    .info-card { background: rgba(30, 30, 60, 0.5); border: 2px solid #334; border-radius: 12px; padding: 20px; text-align: center; }
    .info-card:hover { border-color: #ff9900; }
    .card-icon { font-size: 40px; margin-bottom: 12px; }
    .info-card h3 { color: #ffcc00; margin-bottom: 8px; }
    .info-card p { color: #888; font-size: 13px; margin: 0; }
    
    .steps-list { background: rgba(20, 40, 60, 0.3); padding: 20px 20px 20px 40px; border-radius: 8px; border-left: 4px solid #ff9900; }
    .steps-list li { margin-bottom: 12px; }
    
    .feature-block { background: rgba(20, 20, 40, 0.5); border: 1px solid #334; border-radius: 12px; padding: 20px; margin-bottom: 20px; }
    .feature-block h3 { margin-top: 0; }
    
    .data-table { width: 100%; border-collapse: collapse; margin-top: 12px; }
    .data-table th { background: rgba(255, 153, 0, 0.2); color: #ffcc00; text-align: left; padding: 10px; border-bottom: 2px solid #ff9900; }
    .data-table td { padding: 10px; border-bottom: 1px solid #334; color: #99ccff; }
    .data-table tr:hover td { background: rgba(255, 153, 0, 0.1); }
    
    .star-legend { display: flex; flex-direction: column; gap: 8px; margin-top: 12px; }
    .legend-item { display: flex; align-items: center; gap: 12px; }
    .star { width: 20px; height: 20px; border-radius: 50%; }
    .star.yellow { background: radial-gradient(circle, #ffff88, #ffcc00); }
    .star.red { background: radial-gradient(circle, #ff8866, #cc4400); }
    .star.blue { background: radial-gradient(circle, #88ccff, #4488ff); }
    .star.white { background: radial-gradient(circle, #ffffff, #aabbcc); }
    
    .highlight-text { background: rgba(255, 153, 0, 0.15); border-left: 4px solid #ff9900; padding: 16px; margin: 16px 0; border-radius: 0 8px 8px 0; font-style: italic; }
    
    .victory-cards { display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; margin-top: 24px; }
    .victory-card { background: rgba(30, 30, 60, 0.5); border: 2px solid #334; border-radius: 16px; padding: 24px; text-align: center; }
    .victory-card.conquest { border-color: #ff4444; }
    .victory-card.economic { border-color: #44ff44; }
    .victory-card.time { border-color: #4488ff; }
    .victory-icon { font-size: 48px; margin-bottom: 16px; }
    .victory-card h3 { color: #ffcc00; margin-bottom: 12px; }
    .victory-card p { color: #aaa; font-size: 14px; margin-bottom: 16px; }
    .victory-tip { background: rgba(0, 0, 0, 0.3); padding: 12px; border-radius: 8px; font-size: 12px; color: #888; }
    
    .shortcuts-grid { display: grid; grid-template-columns: repeat(3, 1fr); gap: 24px; }
    .shortcut-group { background: rgba(20, 20, 40, 0.5); border: 1px solid #334; border-radius: 12px; padding: 20px; }
    .shortcut-group h3 { color: #ffcc00; margin: 0 0 16px 0; font-size: 16px; }
    .shortcut { display: flex; align-items: center; gap: 12px; margin-bottom: 10px; color: #99ccff; }
    kbd { background: #334; color: #ffcc00; padding: 4px 10px; border-radius: 4px; font-family: monospace; min-width: 40px; text-align: center; border: 1px solid #556; }
    
    @@media (max-width: 768px) {
        .info-cards { grid-template-columns: repeat(2, 1fr); }
        .victory-cards { grid-template-columns: 1fr; }
        .shortcuts-grid { grid-template-columns: 1fr; }
    }
</style>

@code {
}
