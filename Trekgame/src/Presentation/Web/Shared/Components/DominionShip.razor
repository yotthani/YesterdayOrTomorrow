@* DominionShip.razor - Ship display component for Dominion vessels *@

<div class="@GetContainerClasses()" @onclick="HandleClick">
    <div class="@GetShipClasses()"></div>
    @if (ShowNameplate)
    {
        <div class="ship-nameplate dominion-nameplate">
            <span class="ship-name">@GetDisplayName()</span>
            <span class="ship-class-icon">ðŸ’œ</span>
        </div>
    }
</div>

<style>
    .ship-container.dominion-ship {
        display: inline-flex;
        flex-direction: column;
        background: linear-gradient(180deg, #252030 0%, #151018 100%);
        border: 1px solid #3a3050;
        border-radius: 6px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
        transition: all 0.2s;
    }
    
    .ship-container.dominion-ship:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
        border-color: rgba(124, 58, 237, 0.5);
    }
    
    .ship-container.dominion-ship.selected {
        border-color: #7c3aed;
        box-shadow: 0 0 20px rgba(124, 58, 237, 0.4);
    }
    
    .dominion-nameplate {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        background: linear-gradient(180deg, #5a4a70 0%, #3a3050 50%, #252035 100%);
        border-top: 1px solid #6a5a80;
    }
    
    .dominion-nameplate .ship-name {
        font-size: 10px;
        font-weight: 700;
        color: #e0d8f0;
        text-transform: uppercase;
        letter-spacing: 1px;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.5);
    }
    
    .dominion-nameplate .ship-class-icon {
        width: 22px;
        height: 22px;
        background: linear-gradient(180deg, #6a5a80 0%, #3a3050 100%);
        border: 2px solid #7c3aed;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
        box-shadow: 0 0 8px rgba(124, 58, 237, 0.4);
    }
</style>

@code {
    [Parameter] public string ShipType { get; set; } = "fighter";
    [Parameter] public string Size { get; set; } = "medium";
    [Parameter] public string Category { get; set; } = "military";
    [Parameter] public bool ShowNameplate { get; set; } = false;
    [Parameter] public bool IsSelected { get; set; } = false;
    [Parameter] public bool IsBoosted { get; set; } = false;
    [Parameter] public string? DisplayName { get; set; }
    [Parameter] public EventCallback<string> OnClick { get; set; }
    [Parameter] public string? CssClass { get; set; }

    private string GetContainerClasses()
    {
        var classes = new List<string> { "ship-container", "dominion-ship" };
        if (IsSelected) classes.Add("selected");
        if (OnClick.HasDelegate) classes.Add("clickable");
        if (!string.IsNullOrEmpty(CssClass)) classes.Add(CssClass);
        return string.Join(" ", classes);
    }

    private string GetShipClasses()
    {
        var classes = new List<string> { "ship-card", "dominion", Category, ShipType.ToLowerInvariant() };
        if (!string.IsNullOrEmpty(Size)) classes.Add(Size);
        if (IsBoosted) classes.Add("boosted");
        return string.Join(" ", classes);
    }

    private async Task HandleClick()
    {
        if (OnClick.HasDelegate)
            await OnClick.InvokeAsync(ShipType);
    }

    private string GetDisplayName()
    {
        if (!string.IsNullOrEmpty(DisplayName)) return DisplayName;
        return ShipType.ToLowerInvariant() switch
        {
            // Military - Light
            "fighter" => "Fighter",
            "attack-ship" => "Attack Ship",
            "heavy-attack" => "Heavy Attack",
            "escort" => "Escort",
            "patrol" => "Patrol Craft",
            "scout" => "Scout",
            // Military - Cruisers
            "light-battlecruiser" => "Light Battlecruiser",
            "battlecruiser" => "Battlecruiser",
            "heavy-battlecruiser" => "Heavy Battlecruiser",
            "strike-cruiser" => "Strike Cruiser",
            // Military - Capital
            "battleship" => "Battleship",
            "dreadnought" => "Dreadnought",
            "carrier" => "Carrier",
            "command-ship" => "Command Ship",
            // Military - Special
            "troop-transport" => "Troop Transport",
            "weapon-platform" => "Weapon Platform",
            // Civilian
            "freighter" => "Freighter",
            "cargo-tender" => "Cargo Tender",
            "transport" => "Transport",
            "convoy-escort" => "Convoy Escort",
            "mining-barge" => "Mining Barge",
            "refinery" => "Refinery Ship",
            "harvester" => "Harvester",
            "construction" => "Construction Ship",
            "science" => "Science Vessel",
            "survey" => "Survey Ship",
            "repair" => "Repair Ship",
            "colony-transport" => "Colony Transport",
            "shuttle" => "Shuttle",
            "courier" => "Courier",
            "workbee" => "Workbee",
            "diplomatic" => "Diplomatic",
            _ => ShipType
        };
    }

    // Ship data - Victory is life!
    public static readonly ShipData[] MilitaryShips = new[]
    {
        // Light Combat - Jem'Hadar fighters
        new ShipData("fighter", "Fighter", "Fighter", 6, 3, 1, 10),
        new ShipData("attack-ship", "Attack Ship", "Attack", 9, 5, 1, 9),
        new ShipData("heavy-attack", "Heavy Attack", "Attack", 12, 7, 1, 8),
        new ShipData("escort", "Escort", "Escort", 7, 5, 1, 8),
        new ShipData("patrol", "Patrol Craft", "Patrol", 5, 4, 2, 9),
        new ShipData("scout", "Scout", "Scout", 4, 3, 4, 10),
        // Cruisers
        new ShipData("light-battlecruiser", "Light Battlecruiser", "Cruiser", 10, 8, 2, 7),
        new ShipData("battlecruiser", "Battlecruiser", "Cruiser", 14, 11, 2, 6),
        new ShipData("heavy-battlecruiser", "Heavy Battlecruiser", "Cruiser", 18, 14, 3, 5),
        new ShipData("strike-cruiser", "Strike Cruiser", "Cruiser", 16, 10, 2, 7),
        // Capital Ships
        new ShipData("battleship", "Battleship", "Battleship", 20, 16, 3, 4),
        new ShipData("dreadnought", "Dreadnought", "Dreadnought", 25, 20, 4, 3),
        new ShipData("carrier", "Carrier", "Carrier", 12, 18, 5, 4),
        new ShipData("command-ship", "Command Ship", "Command", 18, 15, 8, 5),
        // Special
        new ShipData("troop-transport", "Troop Transport", "Transport", 6, 10, 1, 5),
        new ShipData("weapon-platform", "Weapon Platform", "Station", 15, 12, 3, 0),
    };

    public static readonly ShipData[] CivilianShips = new[]
    {
        new ShipData("freighter", "Freighter", "Freighter", 2, 4, 0, 5),
        new ShipData("cargo-tender", "Cargo Tender", "Freighter", 1, 3, 0, 5),
        new ShipData("transport", "Transport", "Transport", 1, 3, 0, 5),
        new ShipData("convoy-escort", "Convoy Escort", "Escort", 5, 5, 1, 6),
        new ShipData("mining-barge", "Mining Barge", "Industrial", 2, 4, 1, 3),
        new ShipData("refinery", "Refinery Ship", "Industrial", 2, 5, 2, 3),
        new ShipData("harvester", "Harvester", "Industrial", 2, 4, 1, 4),
        new ShipData("construction", "Construction Ship", "Industrial", 2, 5, 2, 3),
        new ShipData("science", "Science Vessel", "Science", 2, 3, 6, 5),
        new ShipData("survey", "Survey Ship", "Science", 2, 3, 5, 6),
        new ShipData("repair", "Repair Ship", "Support", 1, 4, 3, 4),
        new ShipData("colony-transport", "Colony Transport", "Colonizer", 2, 5, 2, 3),
        new ShipData("shuttle", "Shuttle", "Shuttle", 1, 1, 0, 7),
        new ShipData("courier", "Courier", "Courier", 1, 1, 0, 10),
        new ShipData("diplomatic", "Diplomatic", "Diplomatic", 2, 4, 3, 5),
    };

    public record ShipData(string Type, string Name, string Class, int Attack, int Defense, int Science, int Speed);
}
