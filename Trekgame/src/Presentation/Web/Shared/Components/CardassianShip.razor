@* CardassianShip.razor - Ship display component for Cardassian vessels *@

<div class="@GetContainerClasses()" @onclick="HandleClick">
    <div class="@GetShipClasses()"></div>
    @if (ShowNameplate)
    {
        <div class="ship-nameplate cardassian-nameplate">
            <span class="ship-name">@GetDisplayName()</span>
            <span class="ship-class-icon">ðŸ”±</span>
        </div>
    }
</div>

<style>
    .ship-container.cardassian-ship {
        display: inline-flex;
        flex-direction: column;
        background: linear-gradient(180deg, #3a2a1a 0%, #201510 100%);
        border: 1px solid #5a4020;
        border-radius: 6px;
        overflow: hidden;
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);
        transition: all 0.2s;
    }
    
    .ship-container.cardassian-ship:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(0, 0, 0, 0.6);
        border-color: rgba(217, 119, 6, 0.5);
    }
    
    .ship-container.cardassian-ship.selected {
        border-color: #d97706;
        box-shadow: 0 0 20px rgba(217, 119, 6, 0.4);
    }
    
    .cardassian-nameplate {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: 8px 12px;
        background: linear-gradient(180deg, #b8865a 0%, #8a6040 50%, #5a3a25 100%);
        border-top: 1px solid #c99565;
    }
    
    .cardassian-nameplate .ship-name {
        font-size: 10px;
        font-weight: 700;
        color: #1a0f08;
        text-transform: uppercase;
        letter-spacing: 1px;
        text-shadow: 0 1px 0 rgba(255, 255, 255, 0.2);
    }
    
    .cardassian-nameplate .ship-class-icon {
        width: 22px;
        height: 22px;
        background: linear-gradient(180deg, #c99565 0%, #8a6040 100%);
        border: 2px solid #5a3a25;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 10px;
    }
</style>

@code {
    [Parameter] public string ShipType { get; set; } = "galor";
    [Parameter] public string Size { get; set; } = "medium";
    [Parameter] public string Category { get; set; } = "military";
    [Parameter] public bool ShowNameplate { get; set; } = false;
    [Parameter] public bool IsSelected { get; set; } = false;
    [Parameter] public bool IsObsidianOrder { get; set; } = false;
    [Parameter] public string? DisplayName { get; set; }
    [Parameter] public EventCallback<string> OnClick { get; set; }
    [Parameter] public string? CssClass { get; set; }

    private string GetContainerClasses()
    {
        var classes = new List<string> { "ship-container", "cardassian-ship" };
        if (IsSelected) classes.Add("selected");
        if (OnClick.HasDelegate) classes.Add("clickable");
        if (!string.IsNullOrEmpty(CssClass)) classes.Add(CssClass);
        return string.Join(" ", classes);
    }

    private string GetShipClasses()
    {
        var classes = new List<string> { "ship-card", "cardassian", Category, ShipType.ToLowerInvariant() };
        if (!string.IsNullOrEmpty(Size)) classes.Add(Size);
        if (IsObsidianOrder) classes.Add("obsidian-order");
        return string.Join(" ", classes);
    }

    private async Task HandleClick()
    {
        if (OnClick.HasDelegate)
            await OnClick.InvokeAsync(ShipType);
    }

    private string GetDisplayName()
    {
        if (!string.IsNullOrEmpty(DisplayName)) return DisplayName;
        return ShipType.ToLowerInvariant() switch
        {
            // Military
            "galor" => "Galor",
            "keldon" => "Keldon",
            "hideki" => "Hideki",
            "boknor-armed" => "Bok'Nor (Armed)",
            "attack-wing" => "Attack Wing",
            "destroyer" => "Destroyer",
            "dreadnought" => "Dreadnought",
            "sci-dreadnought" => "Sci-Dreadnought",
            "hutet" => "Hutet",
            "ghemor" => "Ghemor",
            "damar" => "Damar",
            "dukat" => "Dukat",
            "patrol" => "Patrol",
            "escort" => "Escort",
            "fast-attack" => "Fast Attack",
            "weapon-platform" => "Weapon Platform",
            // Civilian
            "groumall" => "Groumall",
            "pythus" => "Pythus",
            "cargo" => "Cargo Vessel",
            "mining" => "Mining Ship",
            "madrone" => "Madrone",
            "scout" => "Scout",
            "courier" => "Courier",
            "colony" => "Colony Ship",
            "toran-shuttle" => "Toran Shuttle",
            "runabout" => "Runabout",
            "construction" => "Construction",
            "repair" => "Repair Ship",
            "diplomatic" => "Diplomatic",
            "yacht" => "Yacht",
            "waste-transport" => "Waste Transport",
            "survey" => "Survey Ship",
            _ => ShipType
        };
    }

    // Ship data
    public static readonly ShipData[] MilitaryShips = new[]
    {
        // Capital Ships
        new ShipData("galor", "Galor", "Cruiser", 10, 8, 2, 6),
        new ShipData("keldon", "Keldon", "Cruiser", 12, 9, 2, 6),
        new ShipData("dreadnought", "Dreadnought", "Dreadnought", 16, 12, 3, 4),
        new ShipData("sci-dreadnought", "Sci-Dreadnought", "Dreadnought", 14, 11, 5, 4),
        new ShipData("hutet", "Hutet", "Battleship", 14, 11, 2, 5),
        // Named Classes
        new ShipData("ghemor", "Ghemor", "Cruiser", 11, 9, 3, 6),
        new ShipData("damar", "Damar", "Cruiser", 12, 10, 2, 5),
        new ShipData("dukat", "Dukat", "Heavy Cruiser", 13, 10, 2, 5),
        // Light Combat
        new ShipData("hideki", "Hideki", "Patrol", 5, 3, 1, 8),
        new ShipData("attack-wing", "Attack Wing", "Fighter", 6, 3, 1, 9),
        new ShipData("destroyer", "Destroyer", "Destroyer", 8, 6, 1, 7),
        new ShipData("patrol", "Patrol", "Patrol", 4, 3, 2, 8),
        new ShipData("escort", "Escort", "Escort", 6, 5, 1, 7),
        new ShipData("fast-attack", "Fast Attack", "Attack", 7, 4, 1, 9),
        // Special
        new ShipData("boknor-armed", "Bok'Nor (Armed)", "Armed Freighter", 6, 5, 1, 5),
        new ShipData("weapon-platform", "Weapon Platform", "Station", 10, 8, 2, 0),
    };

    public static readonly ShipData[] CivilianShips = new[]
    {
        new ShipData("groumall", "Groumall", "Freighter", 2, 4, 1, 5),
        new ShipData("pythus", "Pythus", "Transport", 1, 3, 0, 5),
        new ShipData("cargo", "Cargo Vessel", "Freighter", 1, 3, 0, 4),
        new ShipData("mining", "Mining Ship", "Industrial", 2, 3, 1, 3),
        new ShipData("madrone", "Madrone", "Transport", 1, 2, 0, 5),
        new ShipData("scout", "Scout", "Scout", 3, 2, 3, 8),
        new ShipData("courier", "Courier", "Courier", 1, 1, 0, 9),
        new ShipData("colony", "Colony Ship", "Colonizer", 1, 4, 1, 3),
        new ShipData("toran-shuttle", "Toran Shuttle", "Shuttle", 1, 1, 0, 6),
        new ShipData("runabout", "Runabout", "Shuttle", 2, 2, 1, 6),
        new ShipData("construction", "Construction", "Industrial", 1, 3, 2, 3),
        new ShipData("repair", "Repair Ship", "Support", 1, 3, 2, 4),
        new ShipData("diplomatic", "Diplomatic", "Diplomatic", 2, 4, 2, 5),
        new ShipData("survey", "Survey Ship", "Science", 1, 2, 4, 5),
    };

    public record ShipData(string Type, string Name, string Class, int Attack, int Defense, int Science, int Speed);
}
