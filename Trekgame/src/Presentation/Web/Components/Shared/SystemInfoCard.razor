@* System Info Card - Displays star system information in a compact card format *@

<div class="system-info-card @(IsSelected ? "selected" : "") @(OwnerClass)" @onclick="OnClick">
    @* Star visualization *@
    <div class="system-star @StarClass">
        <div class="star-core"></div>
        <div class="star-glow"></div>
        @if (HasAnomaly)
        {
            <div class="anomaly-indicator">?</div>
        }
    </div>
    
    @* System information *@
    <div class="system-info">
        <div class="system-name">@Name</div>
        <div class="system-details">
            <span class="star-type">@StarType Star</span>
            @if (PlanetCount > 0)
            {
                <span class="planet-count">ü™ê @PlanetCount</span>
            }
        </div>
        
        @if (!string.IsNullOrEmpty(Owner))
        {
            <div class="system-owner">
                <span class="owner-indicator" style="background: @OwnerColor;"></span>
                @Owner
            </div>
        }
        else if (IsExplored)
        {
            <div class="system-status unexplored">Unclaimed</div>
        }
        else
        {
            <div class="system-status">Unexplored</div>
        }
    </div>
    
    @* Quick stats *@
    <div class="system-stats">
        @if (HasColony)
        {
            <div class="stat colony">üèõÔ∏è</div>
        }
        @if (HasShipyard)
        {
            <div class="stat shipyard">üîß</div>
        }
        @if (FleetCount > 0)
        {
            <div class="stat fleets">üöÄ @FleetCount</div>
        }
    </div>
</div>

@code {
    [Parameter] public Guid SystemId { get; set; }
    [Parameter] public string Name { get; set; } = "Unknown";
    [Parameter] public string StarType { get; set; } = "Yellow"; // Yellow, Red, Blue, White, Orange
    [Parameter] public int PlanetCount { get; set; }
    [Parameter] public string? Owner { get; set; }
    [Parameter] public string? OwnerColor { get; set; }
    [Parameter] public bool IsExplored { get; set; }
    [Parameter] public bool HasColony { get; set; }
    [Parameter] public bool HasShipyard { get; set; }
    [Parameter] public bool HasAnomaly { get; set; }
    [Parameter] public int FleetCount { get; set; }
    [Parameter] public bool IsSelected { get; set; }
    [Parameter] public EventCallback OnClick { get; set; }

    private string StarClass => StarType?.ToLower() switch
    {
        "red" or "m" => "star-red",
        "blue" or "o" or "b" => "star-blue",
        "white" or "a" or "f" => "star-white",
        "orange" or "k" => "star-orange",
        _ => "star-yellow"
    };

    private string OwnerClass => !string.IsNullOrEmpty(Owner) ? "has-owner" : "";
}

<style>
    .system-info-card {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px;
        background: rgba(15, 20, 35, 0.7);
        border: 1px solid rgba(255, 255, 255, 0.1);
        border-radius: 10px;
        cursor: pointer;
        transition: all 0.2s;
    }

    .system-info-card:hover {
        background: rgba(25, 30, 50, 0.8);
        border-color: rgba(255, 255, 255, 0.2);
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.3);
    }

    .system-info-card.selected {
        background: rgba(68, 136, 255, 0.1);
        border-color: #4488ff;
        box-shadow: 0 0 20px rgba(68, 136, 255, 0.2);
    }

    .system-info-card.has-owner {
        border-left: 3px solid var(--owner-color, #4488ff);
    }

    /* Star visualization */
    .system-star {
        width: 48px;
        height: 48px;
        position: relative;
        flex-shrink: 0;
    }

    .star-core {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        width: 20px;
        height: 20px;
        border-radius: 50%;
        background: var(--star-color);
        box-shadow: 0 0 10px var(--star-color), 0 0 20px var(--star-color);
    }

    .star-glow {
        position: absolute;
        top: 50%; left: 50%;
        transform: translate(-50%, -50%);
        width: 40px;
        height: 40px;
        border-radius: 50%;
        background: radial-gradient(circle, var(--star-color-dim) 0%, transparent 70%);
        animation: star-pulse 3s ease-in-out infinite;
    }

    @@keyframes star-pulse {
        0%, 100% { transform: translate(-50%, -50%) scale(1); opacity: 0.6; }
        50% { transform: translate(-50%, -50%) scale(1.2); opacity: 0.8; }
    }

    /* Star colors */
    .star-yellow { --star-color: #ffdd44; --star-color-dim: rgba(255, 221, 68, 0.3); }
    .star-red { --star-color: #ff6644; --star-color-dim: rgba(255, 102, 68, 0.3); }
    .star-blue { --star-color: #44aaff; --star-color-dim: rgba(68, 170, 255, 0.3); }
    .star-white { --star-color: #ffffff; --star-color-dim: rgba(255, 255, 255, 0.3); }
    .star-orange { --star-color: #ffaa44; --star-color-dim: rgba(255, 170, 68, 0.3); }

    .anomaly-indicator {
        position: absolute;
        top: 0; right: 0;
        width: 16px;
        height: 16px;
        background: #ff44ff;
        border-radius: 50%;
        font-size: 10px;
        font-weight: 700;
        color: #fff;
        display: flex;
        align-items: center;
        justify-content: center;
        animation: anomaly-blink 1s ease-in-out infinite;
    }

    @@keyframes anomaly-blink {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.5; }
    }

    /* System info */
    .system-info {
        flex: 1;
        min-width: 0;
    }

    .system-name {
        font-weight: 600;
        font-size: 15px;
        color: #fff;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
    }

    .system-details {
        display: flex;
        gap: 10px;
        font-size: 12px;
        color: #888;
        margin-top: 2px;
    }

    .star-type {
        color: var(--star-color, #ffdd44);
    }

    .planet-count {
        color: #aabbcc;
    }

    .system-owner {
        display: flex;
        align-items: center;
        gap: 6px;
        margin-top: 4px;
        font-size: 12px;
        color: #aaa;
    }

    .owner-indicator {
        width: 8px;
        height: 8px;
        border-radius: 50%;
    }

    .system-status {
        margin-top: 4px;
        font-size: 11px;
        color: #666;
        font-style: italic;
    }

    .system-status.unexplored {
        color: #88aa88;
    }

    /* Stats */
    .system-stats {
        display: flex;
        flex-direction: column;
        gap: 4px;
        align-items: flex-end;
    }

    .stat {
        font-size: 12px;
        color: #aaa;
        padding: 2px 6px;
        background: rgba(0, 0, 0, 0.3);
        border-radius: 4px;
    }

    .stat.colony { color: #88cc88; }
    .stat.shipyard { color: #ffaa44; }
    .stat.fleets { color: #88aaff; }
</style>
